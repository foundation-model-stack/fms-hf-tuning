controller-metrics:
  - name: trainer_state
    class: TrainingState
  - name: training_loss_window
    class: HistoryBasedMetric
    arguments:
      window-size: 1
controllers:
  - name: stop-on-training-loss-not-decreasing
    triggers:
      - on_epoch
    rule: training_loss_window[“loss“][-1] > 2.2 and trainer_state[“epochs”] > 5
    operations:
      - hfcontrols.should_training_stop